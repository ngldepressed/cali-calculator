<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strength Matrix | Cali-Biotech</title>
    <style>
        :root { 
            --primary: #4c6fff; 
            --bg: #0a0a0f; 
            --card: #161625; 
            --accent: #00f2ff;
            --inter: #00ff88;
            --adv-inter: #00a2ff;
            --advanced: #bc62ff;
            --gold: #ffcc00;
        }
        
        body { 
            background-color: var(--bg); 
            color: white; 
            font-family: 'Segoe UI', sans-serif; 
            text-align: center; 
            padding: 20px;
            background-image: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #0a0a0f 100%);
        }

        .calc-container { 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            gap: 25px; 
            max-width: 1400px; 
            margin: 0 auto; 
        }

        .card { 
            background: var(--card); 
            padding: 30px; 
            border-radius: 20px; 
            border: 1px solid #2a2a3a; 
            width: 320px; 
            transition: all 0.4s ease;
        }

        .card:hover { border-color: var(--accent); transform: translateY(-5px); }

        h2 { color: #fff; font-size: 0.8rem; letter-spacing: 3px; margin-bottom: 20px; text-transform: uppercase; }

        label { display: block; font-size: 0.65rem; color: #aaa; margin-top: 15px; text-align: left; text-transform: uppercase; }

        input { 
            width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; 
            border: 1px solid #333; background: #0f0f1a; color: var(--accent); 
            box-sizing: border-box; font-family: monospace; font-size: 1rem; outline: none;
        }

        .result-box { 
            margin-top: 25px; padding: 20px; background: rgba(0, 0, 0, 0.4); 
            border-radius: 12px; border: 1px solid #2a2a3a; min-height: 100px;
        }

        .val { font-size: 1.4rem; color: #fff; font-weight: 800; display: block; margin-top: 5px; }
        
        .sub-val { font-size: 0.7rem; color: var(--accent); font-weight: bold; text-transform: uppercase; }

        .lvl-badge { 
            display: inline-block; margin-top: 15px; padding: 6px 12px; 
            font-size: 0.7rem; border-radius: 4px; font-weight: 900; 
            background: #222; color: #fff; letter-spacing: 1px;
        }

        /* Dynamic Colors */
        .lvl-INTERMEDIATE { background: var(--inter); color: #000; }
        .lvl-ADVANCED-INTERMEDIATE { background: var(--adv-inter); }
        .lvl-ADVANCED { background: var(--advanced); }
        .lvl-ELITE { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold); }
    </style>
</head>
<body>

    <div style="margin-bottom: 30px;">
        <select id="unitSystem" onchange="calcAll()" style="background: var(--card); color: var(--accent); border: 1px solid #333; padding: 10px 20px; border-radius: 50px; cursor: pointer; outline: none;">
            <option value="kg">METRIC (KG)</option>
            <option value="lb">IMPERIAL (LBS)</option>
        </select>
    </div>

    <div class="calc-container">
        <div class="card">
            <h2>WEIGHTED PULL-UP</h2>
            <label class="u-label">Bodyweight</label>
            <input type="number" id="pbw" value="75" oninput="calcAll()">
            <label class="u-label">Added Weight</label>
            <input type="number" id="padd" placeholder="0" oninput="calcAll()">
            <label>Reps</label>
            <input type="number" id="prep" placeholder="0" oninput="calcAll()">
            <div class="result-box">
                <span id="pTotal" class="sub-val">Waiting for data</span>
                <span class="val" id="pRes">0.0</span>
                <div id="pLvl" class="lvl-badge">LEVEL: PENDING</div>
            </div>
        </div>

        <div class="card">
            <h2>WEIGHTED DIP</h2>
            <label class="u-label">Bodyweight</label>
            <input type="number" id="dbw" value="75" oninput="calcAll()">
            <label class="u-label">Added Weight</label>
            <input type="number" id="dadd" placeholder="0" oninput="calcAll()">
            <label>Reps</label>
            <input type="number" id="drep" placeholder="0" oninput="calcAll()">
            <div class="result-box">
                <span id="dTotal" class="sub-val">Waiting for data</span>
                <span class="val" id="dRes">0.0</span>
                <div id="dLvl" class="lvl-badge">LEVEL: PENDING</div>
            </div>
        </div>

        <div class="card">
            <h2>ZANETTI / SA RAISE</h2>
            <label class="u-label">Bodyweight</label>
            <input type="number" id="zabw" value="75" oninput="calcAll()">
            <label class="u-label">Dumbbell Weight</label>
            <input type="number" id="zaw" placeholder="0" oninput="calcAll()">
            <label>Reps</label>
            <input type="number" id="zar" placeholder="0" oninput="calcAll()">
            <div class="result-box">
                <span id="zaTotal" class="sub-val">ESTIMATED 1RM</span>
                <span class="val" id="zaRes">0.0</span>
                <div id="zaLvl" class="lvl-badge">LEVEL: PENDING</div>
            </div>
        </div>

        <div class="card">
            <h2>CHEST PRESS</h2>
            <label class="u-label">Bodyweight</label>
            <input type="number" id="cpbw" value="75" oninput="calcAll()">
            <label class="u-label">Weight Lifted</label>
            <input type="number" id="cpw" placeholder="0" oninput="calcAll()">
            <label>Reps</label>
            <input type="number" id="cpr" placeholder="0" oninput="calcAll()">
            <div class="result-box">
                <span id="cpTotal" class="sub-val">ESTIMATED 1RM</span>
                <span class="val" id="cpRes">0.0</span>
                <div id="cpLvl" class="lvl-badge">LEVEL: PENDING</div>
            </div>
        </div>

        <div class="card">
            <h2>SHOULDER PRESS</h2>
            <label class="u-label">Bodyweight</label>
            <input type="number" id="spbw" value="75" oninput="calcAll()">
            <label class="u-label">Weight Lifted</label>
            <input type="number" id="spw" placeholder="0" oninput="calcAll()">
            <label>Reps</label>
            <input type="number" id="spr" placeholder="0" oninput="calcAll()">
            <div class="result-box">
                <span id="spTotal" class="sub-val">ESTIMATED 1RM</span>
                <span class="val" id="spRes">0.0</span>
                <div id="spLvl" class="lvl-badge">LEVEL: PENDING</div>
            </div>
        </div>
    </div>

    <script>
        function getLevel(ratio, type) {
            const scales = {
                pull: [0.15, 0.30, 0.45, 0.65], 
                dip:  [0.25, 0.40, 0.60, 0.85],
                chest: [0.80, 1.05, 1.30, 1.65],
                shoulder: [0.50, 0.65, 0.85, 1.10],
                za: [0.12, 0.18, 0.25, 0.32]
            };
            const [inter, advInter, adv, elite] = scales[type];
            if (ratio >= elite) return "ELITE";
            if (ratio >= adv) return "ADVANCED";
            if (ratio >= advInter) return "ADVANCED INTERMEDIATE";
            if (ratio >= inter) return "INTERMEDIATE";
            return "BEGINNER";
        }

        function brzycki(w, r) {
            return r === 1 ? w : w / (1.0278 - (0.0278 * r));
        }

        function calcAll() {
            const unit = document.getElementById('unitSystem').value;
            document.querySelectorAll('.u-label').forEach(l => {
                l.innerText = l.innerText.split('(')[0].trim() + " (" + unit + ")";
            });

            // Logic for Pull/Dip
            ['p', 'd'].forEach(id => {
                let bw = parseFloat(document.getElementById(id + 'bw').value) || 0;
                let add = parseFloat(document.getElementById(id + 'add').value) || 0;
                let reps = parseInt(document.getElementById(id + 'rep').value) || 0;
                let resDisp = document.getElementById(id + 'Res');
                let totalDisp = document.getElementById(id + 'pTotal' || id + 'dTotal'); // Target spans
                let lvlDisp = document.getElementById(id + 'Lvl');

                if (reps > 0 && bw > 0) {
                    let total1RM = brzycki(bw + add, reps);
                    let addedOnly = total1RM - bw;
                    document.getElementById(id + 'Total').innerText = "TOTAL 1RM: " + total1RM.toFixed(1) + " " + unit;
                    resDisp.innerText = addedOnly.toFixed(1) + " " + unit;
                    let level = getLevel(addedOnly / bw, id === 'p' ? 'pull' : 'dip');
                    lvlDisp.innerText = "LEVEL: " + level;
                    lvlDisp.className = "lvl-badge lvl-" + level.replace(/ /g, '-');
                }
            });

            // Logic for Chest/Shoulder
            [['cp', 'chest'], ['sp', 'shoulder']].forEach(([id, type]) => {
                let bw = parseFloat(document.getElementById(id + 'bw').value) || 0;
                let w = parseFloat(document.getElementById(id + 'w').value) || 0;
                let r = parseInt(document.getElementById(id + 'r').value) || 0;
                if (r > 0 && w > 0 && bw > 0) {
                    let oneRM = brzycki(w, r);
                    document.getElementById(id + 'Res').innerText = oneRM.toFixed(1) + " " + unit;
                    let level = getLevel(oneRM / bw, type);
                    let lBox = document.getElementById(id + 'Lvl');
                    lBox.innerText = "LEVEL: " + level;
                    lBox.className = "lvl-badge lvl-" + level.replace(/ /g, '-');
                }
            });

            // Logic for Zanetti
            let zbw = parseFloat(document.getElementById('zabw').value) || 75;
            let zw = parseFloat(document.getElementById('zaw').value) || 0;
            let zr = parseInt(document.getElementById('zar').value) || 0;
            if(zw > 0 && zr > 0) {
                let oneRM = zw * (1 + (zr * 0.02));
                document.getElementById('zaRes').innerText = oneRM.toFixed(1) + " " + unit;
                let level = getLevel(oneRM / zbw, 'za');
                let lBox = document.getElementById('zaLvl');
                lBox.innerText = "LEVEL: " + level;
                lBox.className = "lvl-badge lvl-" + level.replace(/ /g, '-');
            }
        }
        calcAll();
    </script>
</body>
</html>