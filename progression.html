<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elite Calisthenics Coaching Engine</title>

<style>
:root {
    --primary: #4c6fff;
    --bg-dark: #0a0a0f;
    --card-bg: #1f1f2e;
    --text-main: #e6edf3;
    --glow: rgba(76,111,255,.2);
}
body{
    background:var(--bg-dark);
    color:var(--text-main);
    font-family:Courier New, monospace;
    padding:20px;
}
h1,h2{
    color:var(--primary);
    letter-spacing:3px;
}
.card{
    background:var(--card-bg);
    padding:20px;
    margin:15px 0;
    border-radius:6px;
    border:1px solid rgba(76,111,255,.2);
}
input,select,button{
    width:100%;
    padding:10px;
    margin:8px 0;
    background:#111;
    border:1px solid var(--primary);
    color:var(--primary);
    font-family:monospace;
}
button:hover{
    background:rgba(76,111,255,.2);
    cursor:pointer;
}
.progressBar{
    height:8px;
    background:#222;
    margin-top:4px;
}
.progressFill{
    height:8px;
    background:#00c896;
}
.small{
    font-size:12px;
    opacity:.8;
}
</style>
</head>
<body>

<h1>Elite Adaptive Calisthenics Coach</h1>

<div class="card">
<h2>Target Skill</h2>
<select id="skillSelect"></select>
</div>

<div class="card">
<h2>Athlete Readiness</h2>
<input id="sleep" placeholder="Sleep Hours">
<input id="soreness" placeholder="Soreness 1-10">
<input id="rpe" placeholder="Session RPE 1-10">
<button onclick="updateSystem()">Generate Session</button>
</div>

<div id="dashboard" class="card"></div>
<div id="coach" class="card"></div>

<script>

// =======================
// ELITE SKILL DATABASE
// =======================

const SkillLadders = {

"Full Planche":[
{n:"Planche Lean",hold:20},
{n:"Tuck Planche",hold:15},
{n:"Advanced Tuck Planche",hold:15},
{n:"Straddle Planche",hold:12},
{n:"Full Planche",hold:10}
],

"Front Lever":[
{n:"Tuck FL",hold:20},
{n:"Advanced Tuck FL",hold:15},
{n:"Straddle FL",hold:12},
{n:"Full FL",hold:10}
],

"Iron Cross":[
{n:"RTO Support",hold:30},
{n:"Tuck Cross",hold:15},
{n:"Advanced Tuck Cross",hold:12},
{n:"Straddle Cross",hold:10},
{n:"Iron Cross",hold:8}
],

"One Arm Chin Up":[
{n:"Archer Pullup",hold:5},
{n:"OAC Negative",hold:3},
{n:"Band Assisted OAC",hold:5},
{n:"Full OAC",hold:1},
{n:"Weighted OAC",hold:1}
],

"Manna":[
{n:"L-Sit",hold:30},
{n:"V-Sit 90°",hold:15},
{n:"150° V-Sit",hold:12},
{n:"Manna",hold:8}
]

};

// =======================
// GLOBAL STATE
// =======================

let mastery = {};
let fatigue = 0;
let week = 1;
let phase = "Accumulation";

// =======================
// INIT DROPDOWN
// =======================

const select = document.getElementById("skillSelect");
Object.keys(SkillLadders).forEach(skill=>{
  let o=document.createElement("option");
  o.value=skill;
  o.textContent=skill;
  select.appendChild(o);
});

// =======================
// FATIGUE SYSTEM
// =======================

function updateFatigue(rpe){
 fatigue += rpe*3;
 fatigue -= 4;
 if(fatigue<0) fatigue=0;
}

function injuryRisk(){
 if(fatigue>90) return "High";
 if(fatigue>60) return "Moderate";
 return "Low";
}

function readiness(sleep,soreness){
 let score=(sleep*10)-(soreness*6)-(fatigue/2);
 if(score>70) return "Peak";
 if(score>40) return "Normal";
 return "Fatigued";
}

// =======================
// PERIODIZATION ENGINE
// =======================

function updatePhase(){
 let m = week%4;
 if(m===1) phase="Accumulation";
 if(m===2) phase="Intensification";
 if(m===3) phase="Peak";
 if(m===0) phase="Deload";
}

// =======================
// PROGRESSION ENGINE
// =======================

function currentProgression(skill){
 let ladder=SkillLadders[skill];
 for(let i=0;i<ladder.length;i++){
  if((mastery[ladder[i].n]||0)<100){
   return ladder[i];
  }
 }
 return ladder[ladder.length-1];
}

// =======================
// PRESCRIPTION ENGINE
// =======================

function prescription(skillObj){

 let sets,rest,intensityMultiplier;

 if(phase==="Accumulation"){
  sets=5; rest="90s"; intensityMultiplier=.8;
 }
 if(phase==="Intensification"){
  sets=4; rest="2-3min"; intensityMultiplier=.9;
 }
 if(phase==="Peak"){
  sets=3; rest="3-4min"; intensityMultiplier=1;
 }
 if(phase==="Deload"){
  sets=3; rest="60s"; intensityMultiplier=.6;
 }

 let holdTime=Math.round(skillObj.hold*intensityMultiplier);

 return {
  sets,
  rest,
  hold:holdTime
 }
}

// =======================
// ACCESSORY ENGINE
// =======================

function accessory(skill){

 if(skill.includes("Planche")){
  return "Scap Protraction 3x15s<br>PPPUs 3x6<br>Wrist Prep 5min";
 }
 if(skill.includes("FL")){
  return "Scap Retraction 3x12<br>FL Rows 3x6<br>Hollow Body 3x30s";
 }
 if(skill.includes("Cross")){
  return "Support Hold 3x20s<br>Ring Turn Out 3x15s<br>Shoulder IR Mobility";
 }
 return "Core Compression 3x12<br>General Mobility 5min";
}

// =======================
// COACH ANALYSIS
// =======================

function coachText(skill,state,risk,prog){

 return `
TARGET SKILL: ${skill}<br><br>

Current Progression: ${prog.n}<br>

Readiness State: ${state}<br>
Injury Risk: ${risk}<br><br>

Technical Emphasis:<br>
- Full scapular control<br>
- Straight elbow lock<br>
- Posterior pelvic tilt<br><br>

Progression Rule:<br>
When you exceed prescribed hold by 20% for 2 sessions, advancement unlocks automatically.
`;
}

// =======================
// MAIN ENGINE
// =======================

function updateSystem(){

 let skill=select.value;
 let sleep=parseInt(document.getElementById("sleep").value)||0;
 let soreness=parseInt(document.getElementById("soreness").value)||0;
 let rpe=parseInt(document.getElementById("rpe").value)||0;

 updateFatigue(rpe);
 updatePhase();

 let state=readiness(sleep,soreness);
 let risk=injuryRisk();

 let prog=currentProgression(skill);
 let pres=prescription(prog);

 // Mastery progression logic
 if(state==="Peak" && risk==="Low"){
  mastery[prog.n]=(mastery[prog.n]||0)+15;
 }
 if(mastery[prog.n]>100) mastery[prog.n]=100;

 document.getElementById("dashboard").innerHTML=`
 <h2>Performance Dashboard</h2>
 Week: ${week}<br>
 Phase: ${phase}<br>
 Fatigue: ${fatigue}<br>
 Readiness: ${state}<br>
 Injury Risk: ${risk}<br><br>

 <b>${prog.n}</b> Mastery: ${mastery[prog.n]||0}%
 <div class="progressBar">
   <div class="progressFill" style="width:${mastery[prog.n]||0}%"></div>
 </div>
 `;

 document.getElementById("coach").innerHTML=`
 <h2>Session Prescription</h2>
 Main Skill: ${prog.n}<br>
 Sets: ${pres.sets}<br>
 Hold: ${pres.hold}s<br>
 Rest: ${pres.rest}<br><br>

 <h3>Accessory Work</h3>
 ${accessory(prog.n)}<br><br>

 <h3>Coach Intelligence Report</h3>
 ${coachText(skill,state,risk,prog)}
 `;

 week++;
}

</script>
</body>
</html>