<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elite Calisthenics Coaching System</title>

<style>
:root {
    --primary: #4c6fff;
    --bg-dark: #0a0a0f;
    --card-bg: #1f1f2e;
    --text-main: #e6edf3;
    --glow: rgba(76, 111, 255, 0.15);
}

body { 
    font-family: 'Courier New', monospace; 
    background: var(--bg-dark); 
    color: var(--text-main); 
    padding: 20px;
    letter-spacing: 1px;
}

h1, h2 { 
    text-transform: uppercase; 
    letter-spacing: 4px; 
    color: var(--primary);
    text-shadow: 0 0 10px var(--glow);
}

h1 { text-align: center; font-size: 1.5em; }

.card { 
    background: var(--card-bg); 
    padding: 20px; 
    margin: 15px 0; 
    border-radius: 4px; 
    border: 1px solid rgba(76, 111, 255, 0.2);
}

input, button, select { 
    width: 100%; 
    padding: 12px; 
    margin: 8px 0; 
    background: #161625;
    border: 1px solid var(--primary);
    color: var(--primary);
    font-family: monospace;
    font-weight: bold;
    text-transform: uppercase;
    box-sizing: border-box;
}

button { 
    background: rgba(76, 111, 255, 0.05); 
    cursor: pointer; 
    transition: 0.3s ease;
}

button:hover {
    background: rgba(76, 111, 255, 0.15);
    box-shadow: 0 0 15px var(--glow);
}

.skill { 
    padding: 8px; 
    margin: 4px 0; 
    background: rgba(255, 255, 255, 0.03); 
    border-left: 2px solid #333;
    font-size: 11px;
}

.mastered { 
    background: rgba(0, 200, 150, 0.1); 
    border-left: 2px solid #00c896;
    color: #00c896;
}
</style>
</head>
<body>

<h1>Elite AI Calisthenics Coach</h1>

<div class="card">
    <h2>Athlete Input</h2>
    <input id="sleep" placeholder="Sleep Hours">
    <input id="soreness" placeholder="Soreness (1-10)">
    <input id="rpe" placeholder="Session RPE (1-10)">
    <button onclick="updateSystem()">Update Athlete State</button>
</div>

<div id="dashboard" class="card"></div>
<div id="skillTree" class="card"></div>
<div id="coach" class="card"></div>

<script>
const families = {
    push_straight:["Planche Lean","Pseudo Planche PU","Tuck Planche Lean","Tuck Planche","Tuck Planche PU","Adv Tuck Planche","Adv Tuck PU","Straddle Planche","Straddle PU","Full Planche","Full Planche PU","Planche to HS","90° Planche PU","Maltese Lean","Floor Maltese","Ring Maltese"],
    pull_straight:["Tuck FL","Tuck FL Row","Adv Tuck FL","Adv Tuck FL Row","Straddle FL","Straddle FL Pull","Full FL","FL Pullups","FL to Inverted","Half Lay FL","Victorian Prep","Tuck Victorian","Straddle Victorian","Full Victorian","Victorian Pull","Victorian to Cross"],
    pull_bent:["Australian Row","Pullup","Chest to Bar","Archer Pullup","L Pullup","Typewriter","Assist OAC","OAC Ecc","OAC","OAC +10kg","OAC +20kg","OAC +30kg","Ice Cream Maker","Strict MU","One Arm MU","MU to Cross"],
    push_bent:["PB Dip","Ring Dip","Deep Ring Dip","Wall HSPU","Partial HSPU","Full HSPU","Deficit HSPU","Free HSPU","90° HSPU","90° to HS","OA HSPU Ecc","OA HSPU","Ring 90 Dip","RTO 90 Dip","90 Dip to Cross","90 Dip to Maltese"],
    handstand:["Wall HS","Free HS","Tuck Press","Straddle Press","Pike Press","L Sit Press","Stalder","Straddle Stalder","Straight Press","Manna Press","OA HS","OA Shoulder Tap","OA Press Tuck","OA Straddle Press","OA Straight Press","OA Press to Cross"],
    compression:["Tuck L","L Sit","Str L","45° V","90° V","120° V","150° V","Manna Prep","Manna","Elevated Manna","Manna Press","Manna to HS","RTO V","RTO Manna","Manna to Cross","Manna to Maltese"],
    cross_family:["RTO Support","Assist Cross","Tuck Cross","Adv Tuck Cross","Straddle Cross","Iron Cross","Cross Pullout","Cross to Support","Cross to BL","Inverted Cross","Inv Cross Pull","Elevator Prep","Elevator","Elevator to Cross","Butterfly Mount","Butterfly to Cross"],
    legs:["Squat","Bulgarian","Shrimp","Adv Shrimp","Pistol","Weighted Pistol","Nordic","Full Nordic","Nordic +W","Dragon Squat","Jump Pistol","Sissy","Assist Cossack","Full Cossack","Elevated Cossack","Pistol to Press"]
};

let SkillDB = [];
Object.keys(families).forEach(fam=>{
  families[fam].forEach((skill,index)=>{
    SkillDB.push({ 
        id: skill, 
        family: fam, 
        level: index+1, 
        prereq: index>0 ? families[fam][index-1] : null 
    });
  });
});

let fatigue = 0;
let mastery = {};
let week = 1;

function updateFatigue(rpe){
  fatigue += rpe*2;
  fatigue -= 4;
  if(fatigue<0) fatigue=0;
}

function injuryRisk(){
  if(fatigue>80) return "High";
  if(fatigue>50) return "Moderate";
  return "Low";
}

function readiness(sleep,soreness){
  let score=(sleep*10)-(soreness*5)-(fatigue/2);
  if(score>70) return "Peak";
  if(score>40) return "Normal";
  return "Fatigued";
}

function wave(){
  let m=week%4;
  if(m===1) return {int:70,vol:5};
  if(m===2) return {int:80,vol:4};
  if(m===3) return {int:90,vol:3};
  return {int:60,vol:2};
}

function advanceSkill(){
  let fam = Object.keys(families)[week % 8];
  let currentLevel = Math.min(week,16);
  return families[fam][currentLevel-1];
}

function updateMastery(skill){
  mastery[skill]=(mastery[skill]||0)+8;
  if(mastery[skill]>100) mastery[skill]=100;
}

function renderTree(){
  let html="<h2>Elite Skill Tree</h2>";
  SkillDB.forEach(s=>{
    let percent=mastery[s.id]||0;
    html+=`<div class="skill ${percent>=100?"mastered":""}">
    ${s.family.toUpperCase()} L${s.level} - ${s.id} (${percent}%)
    </div>`;
  });
  document.getElementById("skillTree").innerHTML=html;
}

function coachResponse(state,risk){
  if(risk==="High") return "System overload detected. Immediate deload recommended.";
  if(state==="Fatigued") return "Reduce intensity to 60%. Focus on tendon health and clean execution.";
  if(state==="Peak") return "Neurological readiness high. Attempt next progression.";
  return "Maintain structured overload within wave cycle.";
}

function updateSystem(){
  let sleep=parseInt(document.getElementById("sleep").value)||0;
  let soreness=parseInt(document.getElementById("soreness").value)||0;
  let rpe=parseInt(document.getElementById("rpe").value)||0;

  updateFatigue(rpe);

  let state=readiness(sleep,soreness);
  let risk=injuryRisk();
  let waveData=wave();
  let skill=advanceSkill();

  if(state==="Peak") updateMastery(skill);

  week++;

  document.getElementById("dashboard").innerHTML=`
  <h2>Athlete Dashboard</h2>
  WEEK: ${week}<br>
  FATIGUE: ${fatigue}<br>
  INJURY RISK: ${risk}<br>
  READINESS: ${state}<br>
  WAVE INTENSITY: ${waveData.int}%<br>
  VOLUME SETS: ${waveData.vol}<br>
  TARGET SKILL: ${skill}<br>
  PRESCRIBED HOLDS: ${Math.round(waveData.int/10)}-${Math.round(waveData.int/5)} SEC
  `;

  document.getElementById("coach").innerHTML=`
  <h2>Coach Analysis</h2>
  ${coachResponse(state,risk)}
  `;

  renderTree();
}

renderTree();
</script>
</body>
</html>