<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elite Calisthenics Coaching System</title>

<style>
/* MATCHING THE TARGET THEME */
:root {
    --primary: #4c6fff;
    --bg-dark: #0a0a0f;
    --card-bg: #1f1f2e;
    --text-main: #e6edf3;
    --glow: rgba(76, 111, 255, 0.15);
}

body { 
    font-family: 'Monospace', 'Courier New', Courier; 
    background: var(--bg-dark); 
    color: var(--text-main); 
    padding: 20px;
    letter-spacing: 1px;
}

h1, h2 { 
    text-transform: uppercase; 
    letter-spacing: 4px; 
    color: var(--primary);
    text-shadow: 0 0 10px var(--glow);
}

h1 { text-align: center; font-size: 1.5em; }

.card { 
    background: var(--card-bg); 
    padding: 20px; 
    margin: 15px 0; 
    border-radius: 4px; 
    border: 1px solid rgba(76, 111, 255, 0.2);
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
}

input, button, select { 
    width: 100%; 
    padding: 12px; 
    margin: 8px 0; 
    background: #161625;
    border: 1px solid var(--primary);
    color: var(--primary);
    font-family: monospace;
    font-weight: bold;
    text-transform: uppercase;
    box-sizing: border-box;
}

button { 
    background: rgba(76, 111, 255, 0.05); 
    cursor: pointer; 
    transition: all 0.3s ease;
    letter-spacing: 2px;
}

button:hover {
    background: rgba(76, 111, 255, 0.15);
    box-shadow: 0 0 15px var(--glow);
}

.skill { 
    padding: 8px; 
    margin: 4px 0; 
    background: rgba(255, 255, 255, 0.03); 
    border-radius: 2px; 
    font-size: 11px; 
    border-left: 2px solid #333;
}

.mastered { 
    background: rgba(0, 200, 150, 0.1); 
    border-left: 2px solid #00c896;
    color: #00c896;
}

/* Specific UI elements from your reference */
select {
    width: 220px;
}

.sim-toggle-container {
    padding: 10px 0;
}

#dashboard, #coach {
    line-height: 1.6;
    font-size: 0.9em;
}

</style>
</head>
<body>

<h1>Elite AI Calisthenics Coach</h1>

<div id="login" class="card">
    <h2>Premium Login</h2>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
</div>

<div id="app" style="display:none;">

    <div class="card">
        <h2>Athlete Input</h2>
        <input id="sleep" placeholder="Sleep Hours">
        <input id="soreness" placeholder="Soreness (1-10)">
        <input id="rpe" placeholder="Session RPE (1-10)">
        
        <div class="sim-toggle-container">
            <label style="cursor:pointer; display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" id="simMode" style="width: auto; margin: 0;">
                <span style="color:var(--primary); font-size: 0.7em; letter-spacing: 2px; font-weight: bold;">ACTIVATE BIOTEST SIMULATION</span>
            </label>
        </div>

        <button onclick="updateSystem()">Update Athlete State</button>
        
        <select id="unitSystem" style="margin-top:10px;">
            <option value="met">METRIC (KG / CM)</option>
            <option value="imp">IMPERIAL (LBS / FT-IN)</option>
        </select>
    </div>

    <div id="dashboard" class="card"></div>
    <div id="skillTree" class="card"></div>
    <div id="coach" class="card"></div>

</div>

<script>
// Logic remains identical to your original provided code
function login(){
  if(user.value==="premium" && pass.value==="coach"){
    document.getElementById("login").style.display="none";
    document.getElementById("app").style.display="block";
  } else alert("Use: premium / coach");
}

const families = {
    push_straight:["Planche Lean","Pseudo Planche PU","Tuck Planche Lean","Tuck Planche","Tuck Planche PU","Adv Tuck Planche","Adv Tuck PU","Straddle Planche","Straddle PU","Full Planche","Full Planche PU","Planche to HS","90° Planche PU","Maltese Lean","Floor Maltese","Ring Maltese"],
    pull_straight:["Tuck FL","Tuck FL Row","Adv Tuck FL","Adv Tuck FL Row","Straddle FL","Straddle FL Pull","Full FL","FL Pullups","FL to Inverted","Half Lay FL","Victorian Prep","Tuck Victorian","Straddle Victorian","Full Victorian","Victorian Pull","Victorian to Cross"],
    pull_bent:["Australian Row","Pullup","Chest to Bar","Archer Pullup","L Pullup","Typewriter","Assist OAC","OAC Ecc","OAC","OAC +10kg","OAC +20kg","OAC +30kg","Ice Cream Maker","Strict MU","One Arm MU","MU to Cross"],
    push_bent:["PB Dip","Ring Dip","Deep Ring Dip","Wall HSPU","Partial HSPU","Full HSPU","Deficit HSPU","Free HSPU","90° HSPU","90° to HS","OA HSPU Ecc","OA HSPU","Ring 90 Dip","RTO 90 Dip","90 Dip to Cross","90 Dip to Maltese"],
    handstand:["Wall HS","Free HS","Tuck Press","Straddle Press","Pike Press","L Sit Press","Stalder","Straddle Stalder","Straight Press","Manna Press","OA HS","OA Shoulder Tap","OA Press Tuck","OA Straddle Press","OA Straight Press","OA Press to Cross"],
    compression:["Tuck L","L Sit","Str L","45° V","90° V","120° V","150° V","Manna Prep","Manna","Elevated Manna","Manna Press","Manna to HS","RTO V","RTO Manna","Manna to Cross","Manna to Maltese"],
    cross_family:["RTO Support","Assist Cross","Tuck Cross","Adv Tuck Cross","Straddle Cross","Iron Cross","Cross Pullout","Cross to Support","Cross to BL","Inverted Cross","Inv Cross Pull","Elevator Prep","Elevator","Elevator to Cross","Butterfly Mount","Butterfly to Cross"],
    legs:["Squat","Bulgarian","Shrimp","Adv Shrimp","Pistol","Weighted Pistol","Nordic","Full Nordic","Nordic +W","Dragon Squat","Jump Pistol","Sissy","Assist Cossack","Full Cossack","Elevated Cossack","Pistol to Press"]
};

let SkillDB = [];
Object.keys(families).forEach(fam=>{
  families[fam].forEach((skill,index)=>{
    SkillDB.push({ id: skill, family: fam, level: index+1, prereq: index>0 ? families[fam][index-1] : null });
  });
});

let fatigue = JSON.parse(localStorage.getItem("fatigue"))||0;
let mastery = JSON.parse(localStorage.getItem("mastery"))||{};
let week = JSON.parse(localStorage.getItem("week"))||1;

function updateFatigue(rpe){
  fatigue += rpe*2;
  fatigue -= 4;
  if(fatigue<0) fatigue=0;
  localStorage.setItem("fatigue",fatigue);
}

function injuryRisk(){
  if(fatigue>80) return "High";
  if(fatigue>50) return "Moderate";
  return "Low";
}

function readiness(sleep,soreness){
  let score=(sleep*10)-(soreness*5)-(fatigue/2);
  if(score>70) return "Peak";
  if(score>40) return "Normal";
  return "Fatigued";
}

function wave(){
  let m=week%4;
  if(m===1) return {int:70,vol:5};
  if(m===2) return {int:80,vol:4};
  if(m===3) return {int:90,vol:3};
  return {int:60,vol:2};
}

function advanceSkill(){
  let fam = Object.keys(families)[week % 8];
  let currentLevel = Math.min(week,16);
  return families[fam][currentLevel-1];
}

function updateMastery(skill){
  mastery[skill]=(mastery[skill]||0)+8;
  if(mastery[skill]>100) mastery[skill]=100;
  localStorage.setItem("mastery",JSON.stringify(mastery));
}

function renderTree(){
  let html="<h2>Elite Skill Tree</h2>";
  SkillDB.forEach(s=>{
    let percent=mastery[s.id]||0;
    html+=`<div class="skill ${percent>=100?"mastered":""}">
    ${s.family.toUpperCase()} L${s.level} - ${s.id} (${percent}%)
    </div>`;
  });
  document.getElementById("skillTree").innerHTML=html;
}

function coachResponse(state,risk,waveData){
  if(risk==="High") return "SYSTEM OVERLOAD DETECTED. IMMEDIATE DELOAD RECOMMENDED. AVOID STRAIGHT-ARM MAX EFFORT.";
  if(state==="Fatigued") return "REDUCE INTENSITY TO 60%. EMPHASIZE TENDON CONDITIONING AND TECHNIQUE QUALITY.";
  if(state==="Peak") return "NEUROLOGICAL READINESS HIGH. ATTEMPT NEXT PROGRESSION WITH LONGER HOLDS.";
  return "MAINTAIN STRUCTURED OVERLOAD WITHIN WAVE PROGRESSION.";
}

function updateSystem(){
  let sleep=parseInt(document.getElementById("sleep").value)||0;
  let soreness=parseInt(document.getElementById("soreness").value)||0;
  let rpe=parseInt(document.getElementById("rpe").value)||0;

  updateFatigue(rpe);

  let state=readiness(sleep,soreness);
  let risk=injuryRisk();
  let waveData=wave();
  let skill=advanceSkill();

  if(state==="Peak") updateMastery(skill);

  week++;
  localStorage.setItem("week",week);

  document.getElementById("dashboard").innerHTML=`
  <h2>Athlete Dashboard</h2>
  WEEK: ${week}<br>
  FATIGUE: ${fatigue}<br>
  INJURY RISK: <span style="color:${risk==='Low'?'#00c896':'#ff4c4c'}">${risk}</span><br>
  READINESS: ${state}<br>
  WAVE INTENSITY: ${waveData.int}%<br>
  VOLUME SETS: ${waveData.vol}<br>
  TARGET SKILL: ${skill}<br>
  PRESCRIBED HOLDS: ${Math.round(waveData.int/10)}-${Math.round(waveData.int/5)} SEC
  `;

  document.getElementById("coach").innerHTML=`
  <h2>Coach Analysis</h2>
  ${coachResponse(state,risk,waveData)}
  `;

  renderTree();
}

renderTree();
</script>
</body>
</html>